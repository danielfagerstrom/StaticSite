var require=function(a,b){var c=require.resolve(a,b||"/"),d=require.modules[c];if(!d)throw new Error("Failed to resolve module "+a+", tried "+c);var e=d._cached?d._cached:d();return e};require.paths=[],require.modules={},require.extensions=[".js",".coffee"],require._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},require.resolve=function(){return function(a,b){function g(a){if(require.modules[a])return a;for(var b=0;b<require.extensions.length;b++){var c=require.extensions[b];if(require.modules[a+c])return a+c}}function h(a){a=a.replace(/\/+$/,"");var b=a+"/package.json";if(require.modules[b]){var d=require.modules[b](),e=d.browserify;if(typeof e=="object"&&e.main){var f=g(c.resolve(a,e.main));if(f)return f}else if(typeof e=="string"){var f=g(c.resolve(a,e));if(f)return f}else if(d.main){var f=g(c.resolve(a,d.main));if(f)return f}}return g(a+"/index")}function i(a,b){var c=j(b);for(var d=0;d<c.length;d++){var e=c[d],f=g(e+"/"+a);if(f)return f;var i=h(e+"/"+a);if(i)return i}var f=g(a);if(f)return f}function j(a){var b;a==="/"?b=[""]:b=c.normalize(a).split("/");var d=[];for(var e=b.length-1;e>=0;e--){if(b[e]==="node_modules")continue;var f=b.slice(0,e+1).join("/")+"/node_modules";d.push(f)}return d}b||(b="/");if(require._core[a])return a;var c=require.modules.path(),d=b||".";if(a.match(/^(?:\.\.?\/|\/)/)){var e=g(c.resolve(d,a))||h(c.resolve(d,a));if(e)return e}var f=i(a,d);if(f)return f;throw new Error("Cannot find module '"+a+"'")}}(),require.alias=function(a,b){var c=require.modules.path(),d=null;try{d=require.resolve(a+"/package.json","/")}catch(e){d=require.resolve(a,"/")}var f=c.dirname(d),g=(Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b})(require.modules);for(var h=0;h<g.length;h++){var i=g[h];if(i.slice(0,f.length+1)===f+"/"){var j=i.slice(f.length);require.modules[b+j]=require.modules[f+j]}else i===f&&(require.modules[b]=require.modules[f])}},require.define=function(a,b){var c=require._core[a]?"":require.modules.path().dirname(a),d=function(a){return require(a,c)};d.resolve=function(a){return require.resolve(a,c)},d.modules=require.modules,d.define=require.define;var e={exports:{}};require.modules[a]=function(){return require.modules[a]._cached=e.exports,b.call(e.exports,d,e,e.exports,c,a),require.modules[a]._cached=e.exports,e.exports}},typeof process=="undefined"&&(process={}),process.nextTick||(process.nextTick=function(){var a=[],b=typeof window!="undefined"&&window.postMessage&&window.addEventListener;return b&&window.addEventListener("message",function(b){if(b.source===window&&b.data==="browserify-tick"){b.stopPropagation();if(a.length>0){var c=a.shift();c()}}},!0),function(c){b?(a.push(c),window.postMessage("browserify-tick","*")):setTimeout(c,0)}}()),process.title||(process.title="browser"),process.binding||(process.binding=function(a){if(a==="evals")return require("vm");throw new Error("No such module")}),process.cwd||(process.cwd=function(){return"."}),require.define("path",function(a,b,c,d,e){function f(a,b){var c=[];for(var d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}function g(a,b){var c=0;for(var d=a.length;d>=0;d--){var e=a[d];e=="."?a.splice(d,1):e===".."?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}var h=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;c.resolve=function(){var a="",b=!1;for(var c=arguments.length;c>=-1&&!b;c--){var d=c>=0?arguments[c]:process.cwd();if(typeof d!="string"||!d)continue;a=d+"/"+a,b=d.charAt(0)==="/"}return a=g(f(a.split("/"),function(a){return!!a}),!b).join("/"),(b?"/":"")+a||"."},c.normalize=function(a){var b=a.charAt(0)==="/",c=a.slice(-1)==="/";return a=g(f(a.split("/"),function(a){return!!a}),!b).join("/"),!a&&!b&&(a="."),a&&c&&(a+="/"),(b?"/":"")+a},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(f(a,function(a,b){return a&&typeof a=="string"}).join("/"))},c.dirname=function(a){var b=h.exec(a)[1]||"",c=!1;return b?b.length===1||c&&b.length<=3&&b.charAt(1)===":"?b:b.substring(0,b.length-1):"."},c.basename=function(a,b){var c=h.exec(a)[2]||"";return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return h.exec(a)[3]||""}}),require.define("/app.coffee",function(a,b,c,d,e){((function(){var b,c,d,e;c=a("./app/data");if(location.protocol!=="https:"||location.host!=="s3.amazonaws.com")throw location.href="https://s3.amazonaws.com/"+location.host+location.pathname,new Error("Cannot administer site from this location.");e=function(){var a;return},d=function(a,b){return b.find(".sidebar").length($("body").addClass("with-sidebar"))||$("body").removeClass("with-sidebar"),$("body").removeClass("loading")},b=function(b){var d;typeof localStorage!="undefined"&&(c=localStorage.getItem(b)||void 0);try{d=a(b)[b],d.refresh(c,{silent:!0})}catch(e){d=new Collection(c,{url:"api/"+b})}return d},c.auth()?e():location.href="login.html"})).call(this)}),require.define("/app/data.js",function(a,b,c,d,e){var f=a("../libs/crypto"),g=f.sha1,h=f.aes,i=a("events").EventEmitter,j=a("../libs/promises"),k=a("underscore"),l=a("../libs/s3").s3,m,n=location.pathname.replace(/^\/([^\/]+).*/,"$1"),o="/"+n+"/admin/",p=b.exports=k.extend(new i,{collections:{},get:function(a){return m.get("api/"+a)},put:function(a,b){return m.put("api/"+a,b)},destory:function(a){return m.destory("api/"+a)},refresh:function(a){var b=new j.Deferred,c=b.promise;return m.list("api/").then(function(b){var d=/^api\/(\w+)\/(\w+)$/,e={};b.contents.forEach(function(b){var f=b.key.match(d);if(!f)return;var g=f[2],h=f[1];if(!p.collections.hasOwnProperty(h))return;var i=p.collections[h];e[h]||(e[h]={}),e[h][g]=!0;if(i.get(g)&&i.get(g).etag==b.etag)return;c=c.then(m.get(b.key).then(function(c){c=JSON.parse(c),c.id=g,i.get(g)?i.get(g).set(c,a).etag=b.etag:i.add(c,a).get(g).etag=b.etag},function(a){console.error(a)}))});for(var f in e){var g=[],h=e[f],i=p.collections[f];i.each(function(a){h[a.id]||g.push(a)}),i.remove(g,a)}},b.fail),c.then(function(){return p})},auth:function(){var a=sessionStorage.getItem("creds")||localStorage.getItem("creds");return a?(a=a.split(":"),console.log("this:",this),this.username=a.shift(),l.auth(a.shift(),a.shift()),!0):!1},login:function(a,b,c){var d=new j.Deferred,e=g(a),f=g(b);return $.get("../api/auth/"+e).then(function(b){var g=h.decrypt(b,f,256).split(":");if(g.length===3&&g[0]===e){l.auth(g[1],g[2]);var i=a+":"+g[1]+":"+g[2];m=l.bucket(n),m.list("api/auth/"+e).then(function(){d.fulfill(),sessionStorage.setItem("creds",i),c&&localStorage.setItem("creds",i),p.trigger("login")},function(a){d.fail(a)})}else d.fail(new Error("Incorrect Password"))},function(){d.fail(new Error("Incorrect Username"))}),d.promise},logout:function(){cookie.get("rememberme")&&cookie.set("rememberme","true",thirtyDays(),o,!0),cookie.remove("session",o),l.auth(null,null),p.trigger("logout")},register:function(a,b,c,d){l.auth(a,b),m=l.bucket(n),c=g(c),d=g(d);var e=h.encrypt([c,a,b].join(":"),d,256);return m.put("api/auth/"+c,e,{acl:"public-read"})},parseUrl:function(a,b){return this.addQueryParams(base+a,b)},addQueryParams:function(a,b){var c=[];for(var d in b){if(!b.hasOwnProperty(d))continue;c.push(d+"="+encodeURIComponent(b[d]))}return c.length&&(a+=(a.indexOf("?")!=-1?"&":"?")+c.join("&")),a}})}),require.define("/libs/crypto.js",function(e,f,g,h,k){function s(a){return I(A(G(a),a.length*r))}function t(a){return J(A(G(a),a.length*r))}function u(a){return H(A(G(a),a.length*r))}function v(a,b){return I(D(a,b))}function w(a,b){return J(D(a,b))}function y(a,b){return H(D(a,b))}function z(){return s("abc")=="a9993e364706816aba3e25717850c26c9cd0d89d"}function A(a,b){a[b>>5]|=128<<24-b%32,a[(b+64>>9<<4)+15]=b;var c=Array(80),d=1732584193,e=-271733879,f=-1732584194,g=271733878,h=-1009589776;for(var i=0;i<a.length;i+=16){var j=d,k=e,l=f,m=g,n=h;for(var o=0;o<80;o++){o<16?c[o]=a[i+o]:c[o]=F(c[o-3]^c[o-8]^c[o-14]^c[o-16],1);var p=E(E(F(d,5),B(o,e,f,g)),E(E(h,c[o]),C(o)));h=g,g=f,f=F(e,30),e=d,d=p}d=E(d,j),e=E(e,k),f=E(f,l),g=E(g,m),h=E(h,n)}return Array(d,e,f,g,h)}function B(a,b,c,d){return a<20?b&c|~b&d:a<40?b^c^d:a<60?b&c|b&d|c&d:b^c^d}function C(a){return a<20?1518500249:a<40?1859775393:a<60?-1894007588:-899497514}function D(a,b){var c=G(a);c.length>16&&(c=A(c,a.length*r));var d=Array(16),e=Array(16);for(var f=0;f<16;f++)d[f]=c[f]^909522486,e[f]=c[f]^1549556828;var g=A(d.concat(G(b)),512+b.length*r);return A(e.concat(g),672)}function E(a,b){var c=(a&65535)+(b&65535),d=(a>>16)+(b>>16)+(c>>16);return d<<16|c&65535}function F(a,b){return a<<b|a>>>32-b}function G(a){var b=Array(),c=(1<<r)-1;for(var d=0;d<a.length*r;d+=r)b[d>>5]|=(a.charCodeAt(d/r)&c)<<32-r-d%32;return b}function H(a){var b="",c=(1<<r)-1;for(var d=0;d<a.length*32;d+=r)b+=String.fromCharCode(a[d>>5]>>>32-r-d%32&c);return b}function I(a){var b=p?"0123456789ABCDEF":"0123456789abcdef",c="";for(var d=0;d<a.length*4;d++)c+=b.charAt(a[d>>2]>>(3-d%4)*8+4&15)+b.charAt(a[d>>2]>>(3-d%4)*8&15);return c}function J(a){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c="";for(var d=0;d<a.length*4;d+=3){var e=(a[d>>2]>>8*(3-d%4)&255)<<16|(a[d+1>>2]>>8*(3-(d+1)%4)&255)<<8|a[d+2>>2]>>8*(3-(d+2)%4)&255;for(var f=0;f<4;f++)d*8+f*6>a.length*32?c+=q:c+=b.charAt(e>>6*(3-f)&63)}return c}function L(a){str="";for(j=0;j<=3;j++)str+=K.charAt(a>>j*8+4&15)+K.charAt(a>>j*8&15);return str}function M(a){nblk=(a.length+8>>6)+1,blks=new Array(nblk*16);for(i=0;i<nblk*16;i++)blks[i]=0;for(i=0;i<a.length;i++)blks[i>>2]|=a.charCodeAt(i)<<i%4*8;return blks[i>>2]|=128<<i%4*8,blks[nblk*16-2]=a.length*8,blks}function N(a,b){var c=(a&65535)+(b&65535),d=(a>>16)+(b>>16)+(c>>16);return d<<16|c&65535}function F(a,b){return a<<b|a>>>32-b}function O(a,b,c,d,e,f){return N(F(N(N(b,a),N(d,f)),e),c)}function P(a,b,c,d,e,f,g){return O(b&c|~b&d,a,b,e,f,g)}function Q(a,b,c,d,e,f,g){return O(b&d|c&~d,a,b,e,f,g)}function R(a,b,c,d,e,f,g){return O(b^c^d,a,b,e,f,g)}function S(a,b,c,d,e,f,g){return O(c^(b|~d),a,b,e,f,g)}function T(e){x=M(e),a=1732584193,b=-271733879,c=-1732584194,d=271733878;for(i=0;i<x.length;i+=16)olda=a,oldb=b,oldc=c,oldd=d,a=P(a,b,c,d,x[i+0],7,-680876936),d=P(d,a,b,c,x[i+1],12,-389564586),c=P(c,d,a,b,x[i+2],17,606105819),b=P(b,c,d,a,x[i+3],22,-1044525330),a=P(a,b,c,d,x[i+4],7,-176418897),d=P(d,a,b,c,x[i+5],12,1200080426),c=P(c,d,a,b,x[i+6],17,-1473231341),b=P(b,c,d,a,x[i+7],22,-45705983),a=P(a,b,c,d,x[i+8],7,1770035416),d=P(d,a,b,c,x[i+9],12,-1958414417),c=P(c,d,a,b,x[i+10],17,-42063),b=P(b,c,d,a,x[i+11],22,-1990404162),a=P(a,b,c,d,x[i+12],7,1804603682),d=P(d,a,b,c,x[i+13],12,-40341101),c=P(c,d,a,b,x[i+14],17,-1502002290),b=P(b,c,d,a,x[i+15],22,1236535329),a=Q(a,b,c,d,x[i+1],5,-165796510),d=Q(d,a,b,c,x[i+6],9,-1069501632),c=Q(c,d,a,b,x[i+11],14,643717713),b=Q(b,c,d,a,x[i+0],20,-373897302),a=Q(a,b,c,d,x[i+5],5,-701558691),d=Q(d,a,b,c,x[i+10],9,38016083),c=Q(c,d,a,b,x[i+15],14,-660478335),b=Q(b,c,d,a,x[i+4],20,-405537848),a=Q(a,b,c,d,x[i+9],5,568446438),d=Q(d,a,b,c,x[i+14],9,-1019803690),c=Q(c,d,a,b,x[i+3],14,-187363961),b=Q(b,c,d,a,x[i+8],20,1163531501),a=Q(a,b,c,d,x[i+13],5,-1444681467),d=Q(d,a,b,c,x[i+2],9,-51403784),c=Q(c,d,a,b,x[i+7],14,1735328473),b=Q(b,c,d,a,x[i+12],20,-1926607734),a=R(a,b,c,d,x[i+5],4,-378558),d=R(d,a,b,c,x[i+8],11,-2022574463),c=R(c,d,a,b,x[i+11],16,1839030562),b=R(b,c,d,a,x[i+14],23,-35309556),a=R(a,b,c,d,x[i+1],4,-1530992060),d=R(d,a,b,c,x[i+4],11,1272893353),c=R(c,d,a,b,x[i+7],16,-155497632),b=R(b,c,d,a,x[i+10],23,-1094730640),a=R(a,b,c,d,x[i+13],4,681279174),d=R(d,a,b,c,x[i+0],11,-358537222),c=R(c,d,a,b,x[i+3],16,-722521979),b=R(b,c,d,a,x[i+6],23,76029189),a=R(a,b,c,d,x[i+9],4,-640364487),d=R(d,a,b,c,x[i+12],11,-421815835),c=R(c,d,a,b,x[i+15],16,530742520),b=R(b,c,d,a,x[i+2],23,-995338651),a=S(a,b,c,d,x[i+0],6,-198630844),d=S(d,a,b,c,x[i+7],10,1126891415),c=S(c,d,a,b,x[i+14],15,-1416354905),b=S(b,c,d,a,x[i+5],21,-57434055),a=S(a,b,c,d,x[i+12],6,1700485571),d=S(d,a,b,c,x[i+3],10,-1894986606),c=S(c,d,a,b,x[i+10],15,-1051523),b=S(b,c,d,a,x[i+1],21,-2054922799),a=S(a,b,c,d,x[i+8],6,1873313359),d=S(d,a,b,c,x[i+15],10,-30611744),c=S(c,d,a,b,x[i+6],15,-1560198380),b=S(b,c,d,a,x[i+13],21,1309151649),a=S(a,b,c,d,x[i+4],6,-145523070),d=S(d,a,b,c,x[i+11],10,-1120210379),c=S(c,d,a,b,x[i+2],15,718787259),b=S(b,c,d,a,x[i+9],21,-343485551),a=N(a,olda),b=N(b,oldb),c=N(c,oldc),d=N(d,oldd);return L(a)+L(b)+L(c)+L(d)}function U(a){a=T(a);var b="";for(var c=0;c<32;c+=2)b+=String.fromCharCode(parseInt(a.slice(c,c+2),16));return n.encode(b)}function V(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=Math.random()*16|0,c=a=="x"?b:b&3|8;return c.toString(16)})}var l={};l.cipher=function(a,b){var c=4,d=b.length/c-1,e=[[],[],[],[]];for(var f=0;f<4*c;f++)e[f%4][Math.floor(f/4)]=a[f];e=l.addRoundKey(e,b,0,c);for(var g=1;g<d;g++)e=l.subBytes(e,c),e=l.shiftRows(e,c),e=l.mixColumns(e,c),e=l.addRoundKey(e,b,g,c);e=l.subBytes(e,c),e=l.shiftRows(e,c),e=l.addRoundKey(e,b,d,c);var h=new Array(4*c);for(var f=0;f<4*c;f++)h[f]=e[f%4][Math.floor(f/4)];return h},l.keyExpansion=function(a){var b=4,c=a.length/4,d=c+6,e=new Array(b*(d+1)),f=new Array(4);for(var g=0;g<c;g++){var h=[a[4*g],a[4*g+1],a[4*g+2],a[4*g+3]];e[g]=h}for(var g=c;g<b*(d+1);g++){e[g]=new Array(4);for(var i=0;i<4;i++)f[i]=e[g-1][i];if(g%c==0){f=l.subWord(l.rotWord(f));for(var i=0;i<4;i++)f[i]^=l.rCon[g/c][i]}else c>6&&g%c==4&&(f=l.subWord(f));for(var i=0;i<4;i++)e[g][i]=e[g-c][i]^f[i]}return e},l.subBytes=function(a,b){for(var c=0;c<4;c++)for(var d=0;d<b;d++)a[c][d]=l.sBox[a[c][d]];return a},l.shiftRows=function(a,b){var c=new Array(4);for(var d=1;d<4;d++){for(var e=0;e<4;e++)c[e]=a[d][(e+d)%b];for(var e=0;e<4;e++)a[d][e]=c[e]}return a},l.mixColumns=function(a,b){for(var c=0;c<4;c++){var d=new Array(4),e=new Array(4);for(var f=0;f<4;f++)d[f]=a[f][c],e[f]=a[f][c]&128?a[f][c]<<1^283:a[f][c]<<1;a[0][c]=e[0]^d[1]^e[1]^d[2]^d[3],a[1][c]=d[0]^e[1]^d[2]^e[2]^d[3],a[2][c]=d[0]^d[1]^e[2]^d[3]^e[3],a[3][c]=d[0]^e[0]^d[1]^d[2]^e[3]}return a},l.addRoundKey=function(a,b,c,d){for(var e=0;e<4;e++)for(var f=0;f<d;f++)a[e][f]^=b[c*4+f][e];return a},l.subWord=function(a){for(var b=0;b<4;b++)a[b]=l.sBox[a[b]];return a},l.rotWord=function(a){var b=a[0];for(var c=0;c<3;c++)a[c]=a[c+1];return a[3]=b,a},l.sBox=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],l.rCon=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],l.Ctr={},l.Ctr.encrypt=function(a,b,c){var d=16;if(c!=128&&c!=192&&c!=256)return"";a=o.encode(a),b=o.encode(b);var e=c/8,f=new Array(e);for(var g=0;g<e;g++)f[g]=isNaN(b.charCodeAt(g))?0:b.charCodeAt(g);var h=l.cipher(f,l.keyExpansion(f));h=h.concat(h.slice(0,e-16));var i=new Array(d),j=(new Date).getTime(),k=j%1e3,m=Math.floor(j/1e3),p=Math.floor(Math.random()*65535);for(var g=0;g<2;g++)i[g]=k>>>g*8&255;for(var g=0;g<2;g++)i[g+2]=p>>>g*8&255;for(var g=0;g<4;g++)i[g+4]=m>>>g*8&255;var q="";for(var g=0;g<8;g++)q+=String.fromCharCode(i[g]);var r=l.keyExpansion(h),s=Math.ceil(a.length/d),t=new Array(s);for(var u=0;u<s;u++){for(var v=0;v<4;v++)i[15-v]=u>>>v*8&255;for(var v=0;v<4;v++)i[15-v-4]=u/4294967296>>>v*8;var w=l.cipher(i,r),x=u<s-1?d:(a.length-1)%d+1,y=new Array(x);for(var g=0;g<x;g++)y[g]=w[g]^a.charCodeAt(u*d+g),y[g]=String.fromCharCode(y[g]);t[u]=y.join("")}var z=q+t.join("");return z=n.encode(z),z},l.Ctr.decrypt=function(a,b,c){var d=16;if(c!=128&&c!=192&&c!=256)return"";a=n.decode(a),b=o.encode(b);var e=c/8,f=new Array(e);for(var g=0;g<e;g++)f[g]=isNaN(b.charCodeAt(g))?0:b.charCodeAt(g);var h=l.cipher(f,l.keyExpansion(f));h=h.concat(h.slice(0,e-16));var i=new Array(8);ctrTxt=a.slice(0,8);for(var g=0;g<8;g++)i[g]=ctrTxt.charCodeAt(g);var j=l.keyExpansion(h),k=Math.ceil((a.length-8)/d),m=new Array(k);for(var p=0;p<k;p++)m[p]=a.slice(8+p*d,8+p*d+d);a=m;var q=new Array(a.length);for(var p=0;p<k;p++){for(var r=0;r<4;r++)i[15-r]=p>>>r*8&255;for(var r=0;r<4;r++)i[15-r-4]=(p+1)/4294967296-1>>>r*8&255;var s=l.cipher(i,j),t=new Array(a[p].length);for(var g=0;g<a[p].length;g++)t[g]=s[g]^a[p].charCodeAt(g),t[g]=String.fromCharCode(t[g]);q[p]=t.join("")}var u=q.join("");return u=o.decode(u),u};var m={};m.hash=function(a,b){b=typeof b=="undefined"?!0:b,b&&(a=o.encode(a));var c=[1518500249,1859775393,2400959708,3395469782];a+=String.fromCharCode(128);var d=a.length/4+2,e=Math.ceil(d/16),f=new Array(e);for(var g=0;g<e;g++){f[g]=new Array(16);for(var h=0;h<16;h++)f[g][h]=a.charCodeAt(g*64+h*4)<<24|a.charCodeAt(g*64+h*4+1)<<16|a.charCodeAt(g*64+h*4+2)<<8|a.charCodeAt(g*64+h*4+3)}f[e-1][14]=(a.length-1)*8/Math.pow(2,32),f[e-1][14]=Math.floor(f[e-1][14]),f[e-1][15]=(a.length-1)*8&4294967295;var i=1732584193,j=4023233417,k=2562383102,l=271733878,n=3285377520,p=new Array(80),q,r,s,t,u;for(var g=0;g<e;g++){for(var v=0;v<16;v++)p[v]=f[g][v];for(var v=16;v<80;v++)p[v]=m.ROTL(p[v-3]^p[v-8]^p[v-14]^p[v-16],1);q=i,r=j,s=k,t=l,u=n;for(var v=0;v<80;v++){var w=Math.floor(v/20),x=m.ROTL(q,5)+m.f(w,r,s,t)+u+c[w]+p[v]&4294967295;u=t,t=s,s=m.ROTL(r,30),r=q,q=x}i=i+q&4294967295,j=j+r&4294967295,k=k+s&4294967295,l=l+t&4294967295,n=n+u&4294967295}return m.toHexStr(i)+m.toHexStr(j)+m.toHexStr(k)+m.toHexStr(l)+m.toHexStr(n)},m.f=function(a,b,c,d){switch(a){case 0:return b&c^~b&d;case 1:return b^c^d;case 2:return b&c^b&d^c&d;case 3:return b^c^d}},m.ROTL=function(a,b){return a<<b|a>>>32-b},m.toHexStr=function(a){var b="",c;for(var d=7;d>=0;d--)c=a>>>d*4&15,b+=c.toString(16);return b};var n={};n.code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n.encode=function(a,b){b=typeof b=="undefined"?!1:b;var c,d,e,f,g,h,i,j,k=[],l="",m,o,p,q=n.code;o=b?a.encodeUTF8():a,m=o.length%3;if(m>0)while(m++<3)l+="=",o+="\0";for(m=0;m<o.length;m+=3)c=o.charCodeAt(m),d=o.charCodeAt(m+1),e=o.charCodeAt(m+2),f=c<<16|d<<8|e,g=f>>18&63,h=f>>12&63,i=f>>6&63,j=f&63,k[m/3]=q.charAt(g)+q.charAt(h)+q.charAt(i)+q.charAt(j);return p=k.join(""),p=p.slice(0,p.length-l.length)+l,p},n.decode=function(a,b){b=typeof b=="undefined"?!1:b;var c,d,e,f,g,h,i,j,k=[],l,m,o=n.code;m=b?a.decodeUTF8():a;for(var p=0;p<m.length;p+=4)f=o.indexOf(m.charAt(p)),g=o.indexOf(m.charAt(p+1)),h=o.indexOf(m.charAt(p+2)),i=o.indexOf(m.charAt(p+3)),j=f<<18|g<<12|h<<6|i,c=j>>>16&255,d=j>>>8&255,e=j&255,k[p/4]=String.fromCharCode(c,d,e),i==64&&(k[p/4]=String.fromCharCode(c,d)),h==64&&(k[p/4]=String.fromCharCode(c));return l=k.join(""),b?l.decodeUTF8():l};var o={};o.encode=function(a){var b=a.replace(/[\u0080-\u07ff]/g,function(a){var b=a.charCodeAt(0);return String.fromCharCode(192|b>>6,128|b&63)});return b=b.replace(/[\u0800-\uffff]/g,function(a){var b=a.charCodeAt(0);return String.fromCharCode(224|b>>12,128|b>>6&63,128|b&63)}),b},o.decode=function(a){var b=a.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(a){var b=(a.charCodeAt(0)&15)<<12|(a.charCodeAt(1)&63)<<6|a.charCodeAt(2)&63;return String.fromCharCode(b)});return b=b.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(a){var b=(a.charCodeAt(0)&31)<<6|a.charCodeAt(1)&63;return String.fromCharCode(b)}),b};var p=0,q="=",r=8,K="0123456789abcdef";typeof g!="undefined"&&(g.aes=l.Ctr,g.sha1=m.hash,g.base64=n,g.utf8=o,g.hex_sha1=s,g.b64_sha1=t,g.str_sha1=u,g.hex_hmac_sha1=v,g.b64_hmac_sha1=w,g.str_hmac_sha1=y,g.md5=T,g.b64_md5_digest=U,g.uuid=V)}),require.define("events",function(a,b,c,d,e){process.EventEmitter||(process.EventEmitter=function(){});var f=c.EventEmitter=process.EventEmitter,g=typeof Array.isArray=="function"?Array.isArray:function(a){return Object.toString.call(a)==="[object Array]"},h=10;f.prototype.setMaxListeners=function(a){this._events||(this._events={}),this._events.maxListeners=a},f.prototype.emit=function(a){if(a==="error")if(!this._events||!this._events.error||g(this._events.error)&&!this._events.error.length)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var b=this._events[a];if(!b)return!1;if(typeof b=="function"){switch(arguments.length){case 1:b.call(this);break;case 2:b.call(this,arguments[1]);break;case 3:b.call(this,arguments[1],arguments[2]);break;default:var c=Array.prototype.slice.call(arguments,1);b.apply(this,c)}return!0}if(g(b)){var c=Array.prototype.slice.call(arguments,1),d=b.slice();for(var e=0,f=d.length;e<f;e++)d[e].apply(this,c);return!0}return!1},f.prototype.addListener=function(a,b){if("function"!=typeof b)throw new Error("addListener only takes instances of Function");this._events||(this._events={}),this.emit("newListener",a,b);if(!this._events[a])this._events[a]=b;else if(g(this._events[a])){if(!this._events[a].warned){var c;this._events.maxListeners!==undefined?c=this._events.maxListeners:c=h,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),console.trace())}this._events[a].push(b)}else this._events[a]=[this._events[a],b];return this},f.prototype.on=f.prototype.addListener,f.prototype.once=function(a,b){var c=this;return c.on(a,function d(){c.removeListener(a,d),b.apply(this,arguments)}),this},f.prototype.removeListener=function(a,b){if("function"!=typeof b)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[a])return this;var c=this._events[a];if(g(c)){var d=c.indexOf(b);if(d<0)return this;c.splice(d,1),c.length==0&&delete this._events[a]}else this._events[a]===b&&delete this._events[a];return this},f.prototype.removeAllListeners=function(a){return a&&this._events&&this._events[a]&&(this._events[a]=null),this},f.prototype.listeners=function(a){return this._events||(this._events={}),this._events[a]||(this._events[a]=[]),g(this._events[a])||(this._events[a]=[this._events[a]]),this._events[a]}}),require.define("/libs/promises.coffee",function(a,b,c,d,e){((function(){var a,b,d,e,f,g=function(a,b){return function(){return a.apply(b,arguments)}},h=Array.prototype.slice;if(typeof c=="undefined"||c===null)c=this;b=function(){function a(){this.call=g(this.call,this)}return a.prototype.then=function(a,b,c,d){throw new TypeError("The Promise base class is abstract, this function is overwritten by the promise's deferred object")},a.prototype.fulfilled=function(a){return this.then(a)},a.prototype.failed=function(a){return this.then(null,a)},a.prototype.finished=function(a){return this.then(a,a)},a.prototype.progress=function(a){return this.then(null,null,a)},a.prototype.canceled=function(a){return this.then(null,null,null,a)},a.prototype.apply=function(a,b){return this.then(function(c){if(!(c instanceof Array)(a.apply(b,c)))return a.call(b,c)})},a.prototype.cancel=function(){var a;return(a=this.prev)!=null?a.cancel():void 0},a.prototype.get=function(a){return this.then(function(b){return b[a]})},a.prototype.set=function(a,b){return this.then(function(c){return c[a]=b,c})},a.prototype.put=function(a,b){return this.then(function(c){return c[a]=b})},a.prototype.run=function(){var a,b;return a=arguments[0],b=2<=arguments.length?h.call(arguments,1):[],this.then(function(c){return c[a].apply(c,b),c})},a.prototype.call=function(){var a,b;return a=arguments[0],b=2<=arguments.length?h.call(arguments,1):[],this.then(function(c){return c[a].apply(c,b)})},a}(),["pop","push","reverse","shift","sort","splice","unshift","filter","forEach","every","map","some"].forEach(function(a){return b.prototype[a]=function(){var b;return b=1<=arguments.length?h.call(arguments,0):[],this.then(function(c){var d;return c instanceof Array&&(d=c[a].apply(c,b)),d!=null?d:c})}}),c.when=function(){var b,c,d,e,f,g,i,j,k;j=1<=arguments.length?h.call(arguments,0):[],d=new a,b=j.length,f=!1,e=function(a){return f=!0,a},c=function(a){return function(){var c;return c=1<=arguments.length?h.call(arguments,0):[],j[a]=c.length>1?c:c[0],--b===0&&(f?d.fail.apply(d,j):d.fulfill.apply(d,j)),value}};for(g=0,k=j.length;g<k;g++)i=j[g],i&&typeof i.then=="function"?i.then(c(g),e):--b;return b===0&&d.fulfill.apply(d,j),d.promise},d=function(){var a;return a=1<=arguments.length?h.call(arguments,0):[],a.isArgs=!0,a},a=function(){function a(b){var c,d=this;b==null&&(b=new a.Promise),this.progress=g(this.progress,this),this.cancel=g(this.cancel,this),this.fail=g(this.fail,this),this.fulfill=g(this.fulfill,this),this.then=g(this.then,this),this.promise=b,this.status="unfulfilled",this.progressHandlers=[],this.handlers=[],c=b.cancel,b.cancel=function(){var a;return a=1<=arguments.length?h.call(arguments,0):[],d.status="canceled",c.apply(b,a)},b.then=this.then}return a.prototype.then=function(b,c,d,e){var g,h;return this.progressHandlers.push(d!=null),h=new a,h.promise.prev=this.promise,g={fulfilled:b,failed:c,nextDeferred:h,canceled:e},this.finished()?f.call(this,g):this.handlers.push(g),h.promise},a.prototype.finished=function(){return this.status!=="unfulfilled"},a.prototype.fulfill=function(){var a,b;a=1<=arguments.length?h.call(arguments,0):[];if((b=a[0])!=null?b.isArgs:void 0)a=a[0];return e.call(this,"fulfilled",a)},a.prototype.fail=function(){var a;return a=1<=arguments.length?h.call(arguments,0):[],e.call(this,"failed",a)},a.prototype.cancel=function(){var a;return a=1<=arguments.length?h.call(arguments,0):[],e.call(this,"canceled",a)},a.prototype.progress=function(a){var b,c,d,e,f;e=this.progressHandlers,f=[];for(c=0,d=e.length;c<d;c++)b=e[c],f.push(b.apply(null,a));return f},a.prototype.timeout=function(a,b){var c=this;return clearTimeout(this._timeout),this._timeout=setTimeout(function(){return c.fail(b!=null?b:new Error("Operation timed out"))},a)},a.prototype.reset=function(){return this.status="unfulfilled",this.progressHandlers=[],this.handlers=[]},a}(),e=function(a,b){var c,d,e,g,h;if(this.status!=="unfulfilled")return;clearTimeout(this._timeout),this.status=a,this.results=b,g=this.handlers,h=[];for(d=0,e=g.length;d<e;d++)c=g[d],h.push(f.call(this,c));return h},f=function(a){var b,c,d,e;e=this.results,c=a[this.status],b=a.nextDeferred;if(!c){b[this.status.slice(0,-2)].apply(b,e);return}return d=c.apply(null,e),d&&typeof d.then=="function"?d.then(b.fulfill,b.fail):d instanceof Error?b.fail(d):d===void 0?b[this.status.slice(0,-2)].apply(b,e):b.fulfill(d)},a.Promise=b,Function.prototype.bind||(Function.prototype.bind=function(){var a,b,c,d,e;return c=arguments[0],d=2<=arguments.length?h.call(arguments,1):[],e=this,b=function(){},a=function(){var a,f;return a=1<=arguments.length?h.call(arguments,0):[],e.apply((f=this instanceof b)!=null?f:{"this":c!=null?c:{}},d.concat(a))},b.prototype=e.prototype,a.prototype=new b,a}),c.Deferred=a,c.Promise=b,c.args=d,c.wrap=function(b,c){return function(){var d,e,f;return d=1<=arguments.length?h.call(arguments,0):[],f=new a(c),typeof d[d.length-1]=="function"&&(e=d.pop()),d.push(function(){var a,b;return a=arguments[0],b=2<=arguments.length?h.call(arguments,1):[],e&&e.apply(null,[a].concat(h.call(b))),a?f.fail(a):f.fulfill.apply(f,b)}),b.apply(this,d),f.promise}},c.convert=function(b){var c;return c=new a,b.then(c.fulfill,c.fail),c.promise},c.fulfilled=function(b,c){var d;return d=new a(c),d.fulfill(b),d.promise},c.failed=function(b,c){var d;return d=new a(c),d.fail(b),d.promise}})).call(this)}),require.define("/node_modules/underscore/package.json",function(a,b,c,d,e){b.exports={main:"underscore.js"}}),require.define("/node_modules/underscore/underscore.js",function(a,b,c,d,e){((function(){function C(a,b,c){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped);if(a.isEqual&&y.isFunction(a.isEqual))return a.isEqual(b);if(b.isEqual&&y.isFunction(b.isEqual))return b.isEqual(a);var d=k.call(a);if(d!=k.call(b))return!1;switch(d){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return!1;var e=c.length;while(e--)if(c[e]==a)return!0;c.push(a);var f=0,g=!0;if(d=="[object Array]"){f=a.length,g=f==b.length;if(g)while(f--)if(!(g=f in a==f in b&&C(a[f],b[f],c)))break}else{if("constructor"in a!="constructor"in b||a.constructor!=b.constructor)return!1;for(var h in a)if(l.call(a,h)){f++;if(!(g=l.call(b,h)&&C(a[h],b[h],c)))break}if(g){for(h in b)if(l.call(b,h)&&!(f--))break;g=!f}}return c.pop(),g}var a=this,d=a._,e={},f=Array.prototype,g=Object.prototype,h=Function.prototype,i=f.slice,j=f.unshift,k=g.toString,l=g.hasOwnProperty,m=f.forEach,n=f.map,o=f.reduce,p=f.reduceRight,q=f.filter,r=f.every,s=f.some,t=f.indexOf,u=f.lastIndexOf,v=Array.isArray,w=Object.keys,x=h.bind,y=function(a){return new F(a)};typeof c!="undefined"?(typeof b!="undefined"&&b.exports&&(c=b.exports=y),c._=y):typeof define=="function"&&define.amd?define("underscore",function(){return y}):a._=y,y.VERSION="1.2.4";var z=y.each=y.forEach=function(a,b,c){if(a==null)return;if(m&&a.forEach===m)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,f=a.length;d<f;d++)if(d in a&&b.call(c,a[d],d,a)===e)return}else for(var g in a)if(l.call(a,g)&&b.call(c,a[g],g,a)===e)return};y.map=function(a,b,c){var d=[];return a==null?d:n&&a.map===n?a.map(b,c):(z(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),a.length===+a.length&&(d.length=a.length),d)},y.reduce=y.foldl=y.inject=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(o&&a.reduce===o)return d&&(b=y.bind(b,d)),e?a.reduce(b,c):a.reduce(b);z(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c},y.reduceRight=y.foldr=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(p&&a.reduceRight===p)return d&&(b=y.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=y.toArray(a).reverse();return d&&!e&&(b=y.bind(b,d)),e?y.reduce(f,b,c,d):y.reduce(f,b)},y.find=y.detect=function(a,b,c){var d;return A(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},y.filter=y.select=function(a,b,c){var d=[];return a==null?d:q&&a.filter===q?a.filter(b,c):(z(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},y.reject=function(a,b,c){var d=[];return a==null?d:(z(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)}),d)},y.every=y.all=function(a,b,c){var d=!0;return a==null?d:r&&a.every===r?a.every(b,c):(z(a,function(a,f,g){if(!(d=d&&b.call(c,a,f,g)))return e}),d)};var A=y.some=y.any=function(a,b,c){b||(b=y.identity);var d=!1;return a==null?d:s&&a.some===s?a.some(b,c):(z(a,function(a,f,g){if(d||(d=b.call(c,a,f,g)))return e}),!!d)};y.include=y.contains=function(a,b){var c=!1;return a==null?c:t&&a.indexOf===t?a.indexOf(b)!=-1:(c=A(a,function(a){return a===b}),c)},y.invoke=function(a,b){var c=i.call(arguments,2);return y.map(a,function(a){return(y.isFunction(b)?b||a:a[b]).apply(a,c)})},y.pluck=function(a,b){return y.map(a,function(a){return a[b]})},y.max=function(a,b,c){if(!b&&y.isArray(a))return Math.max.apply(Math,a);if(!b&&y.isEmpty(a))return-Infinity;var d={computed:-Infinity};return z(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},y.min=function(a,b,c){if(!b&&y.isArray(a))return Math.min.apply(Math,a);if(!b&&y.isEmpty(a))return Infinity;var d={computed:Infinity};return z(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},y.shuffle=function(a){var b=[],c;return z(a,function(a,d,e){d==0?b[0]=a:(c=Math.floor(Math.random()*(d+1)),b[d]=b[c],b[c]=a)}),b},y.sortBy=function(a,b,c){return y.pluck(y.map(a,function(a,d,e){return{value:a,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")},y.groupBy=function(a,b){var c={},d=y.isFunction(b)?b:function(a){return a[b]};return z(a,function(a,b){var e=d(a,b);(c[e]||(c[e]=[])).push(a)}),c},y.sortedIndex=function(a,b,c){c||(c=y.identity);var d=0,e=a.length;while(d<e){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d},y.toArray=function(a){return a?a.toArray?a.toArray():y.isArray(a)?i.call(a):y.isArguments(a)?i.call(a):y.values(a):[]},y.size=function(a){return y.toArray(a).length},y.first=y.head=function(a,b,c){return b!=null&&!c?i.call(a,0,b):a[0]},y.initial=function(a,b,c){return i.call(a,0,a.length-(b==null||c?1:b))},y.last=function(a,b,c){return b!=null&&!c?i.call(a,Math.max(a.length-b,0)):a[a.length-1]},y.rest=y.tail=function(a,b,c){return i.call(a,b==null||c?1:b)},y.compact=function(a){return y.filter(a,function(a){return!!a})},y.flatten=function(a,b){return y.reduce(a,function(a,c){return y.isArray(c)?a.concat(b?c:y.flatten(c)):(a[a.length]=c,a)},[])},y.without=function(a){return y.difference(a,i.call(arguments,1))},y.uniq=y.unique=function(a,b,c){var d=c?y.map(a,c):a,e=[];return y.reduce(d,function(c,d,f){if(0==f||(b===!0?y.last(c)!=d:!y.include(c,d)))c[c.length]=d,e[e.length]=a[f];return c},[]),e},y.union=function(){return y.uniq(y.flatten(arguments,!0))},y.intersection=y.intersect=function(a){var b=i.call(arguments,1);return y.filter(y.uniq(a),function(a){return y.every(b,function(b){return y.indexOf(b,a)>=0})})},y.difference=function(a){var b=y.flatten(i.call(arguments,1));return y.filter(a,function(a){return!y.include(b,a)})},y.zip=function(){var a=i.call(arguments),b=y.max(y.pluck(a,"length")),c=new Array(b);for(var d=0;d<b;d++)c[d]=y.pluck(a,""+d);return c},y.indexOf=function(a,b,c){if(a==null)return-1;var d,e;if(c)return d=y.sortedIndex(a,b),a[d]===b?d:-1;if(t&&a.indexOf===t)return a.indexOf(b);for(d=0,e=a.length;d<e;d++)if(d in a&&a[d]===b)return d;return-1},y.lastIndexOf=function(a,b){if(a==null)return-1;if(u&&a.lastIndexOf===u)return a.lastIndexOf(b);var c=a.length;while(c--)if(c in a&&a[c]===b)return c;return-1},y.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);while(e<d)f[e++]=a,a+=c;return f};var B=function(){};y.bind=function(b,c){var d,e;if(b.bind===x&&x)return x.apply(b,i.call(arguments,1));if(!y.isFunction(b))throw new TypeError;return e=i.call(arguments,2),d=function(){if(this instanceof d){B.prototype=b.prototype;var a=new B,f=b.apply(a,e.concat(i.call(arguments)));return Object(f)===f?f:a}return b.apply(c,e.concat(i.call(arguments)))}},y.bindAll=function(a){var b=i.call(arguments,1);return b.length==0&&(b=y.functions(a)),z(b,function(b){a[b]=y.bind(a[b],a)}),a},y.memoize=function(a,b){var c={};return b||(b=y.identity),function(){var d=b.apply(this,arguments);return l.call(c,d)?c[d]:c[d]=a.apply(this,arguments)}},y.delay=function(a,b){var c=i.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)},y.defer=function(a){return y.delay.apply(y,[a,1].concat(i.call(arguments,1)))},y.throttle=function(a,b){var c,d,e,f,g,h=y.debounce(function(){g=f=!1},b);return function(){c=this,d=arguments;var i=function(){e=null,g&&a.apply(c,d),h()};e||(e=setTimeout(i,b)),f?g=!0:a.apply(c,d),h(),f=!0}},y.debounce=function(a,b){var c;return function(){var d=this,e=arguments,f=function(){c=null,a.apply(d,e)};clearTimeout(c),c=setTimeout(f,b)}},y.once=function(a){var b=!1,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments))}},y.wrap=function(a,b){return function(){var c=[a].concat(i.call(arguments,0));return b.apply(this,c)}},y.compose=function(){var a=arguments;return function(){var b=arguments;for(var c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},y.after=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}},y.keys=w||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)l.call(a,c)&&(b[b.length]=c);return b},y.values=function(a){return y.map(a,y.identity)},y.functions=y.methods=function(a){var b=[];for(var c in a)y.isFunction(a[c])&&b.push(c);return b.sort()},y.extend=function(a){return z(i.call(arguments,1),function(b){for(var c in b)b[c]!==void 0&&(a[c]=b[c])}),a},y.defaults=function(a){return z(i.call(arguments,1),function(b){for(var c in b)a[c]==null&&(a[c]=b[c])}),a},y.clone=function(a){return y.isObject(a)?y.isArray(a)?a.slice():y.extend({},a):a},y.tap=function(a,b){return b(a),a},y.isEqual=function(a,b){return C(a,b,[])},y.isEmpty=function(a){if(y.isArray(a)||y.isString(a))return a.length===0;for(var b in a)if(l.call(a,b))return!1;return!0},y.isElement=function(a){return!!a&&a.nodeType==1},y.isArray=v||function(a){return k.call(a)=="[object Array]"},y.isObject=function(a){return a===Object(a)},y.isArguments=function(a){return k.call(a)=="[object Arguments]"},y.isArguments(arguments)||(y.isArguments=function(a){return!!a&&!!l.call(a,"callee")}),y.isFunction=function(a){return k.call(a)=="[object Function]"},y.isString=function(a){return k.call(a)=="[object String]"},y.isNumber=function(a){return k.call(a)=="[object Number]"},y.isNaN=function(a){return a!==a},y.isBoolean=function(a){return a===!0||a===!1||k.call(a)=="[object Boolean]"},y.isDate=function(a){return k.call(a)=="[object Date]"},y.isRegExp=function(a){return k.call(a)=="[object RegExp]"},y.isNull=function(a){return a===null},y.isUndefined=function(a){return a===void 0},y.noConflict=function(){return a._=d,this},y.identity=function(a){return a},y.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)},y.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},y.mixin=function(a){z(y.functions(a),function(b){H(b,y[b]=a[b])})};var D=0;y.uniqueId=function(a){var b=D++;return a?a+b:b},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var E=/.^/;y.template=function(a,b){var c=y.templateSettings,d="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.escape||E,function(a,b){return"',_.escape("+b.replace(/\\'/g,"'")+"),'"}).replace(c.interpolate||E,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(c.evaluate||E,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ").replace(/\\\\/g,"\\")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",e=new Function("obj","_",d);return b?e(b,y):function(a){return e.call(this,a,y)}},y.chain=function(a){return y(a).chain()};var F=function(a){this._wrapped=a};y.prototype=F.prototype;var G=function(a,b){return b?y(a).chain():a},H=function(a,b){F.prototype[a]=function(){var a=i.call(arguments);return j.call(a,this._wrapped),G(b.apply(y,a),this._chain)}};y.mixin(y),z(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=f[a];F.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);var d=c.length;return(a=="shift"||a=="splice")&&d===0&&delete c[0],G(c,this._chain)}}),z(["concat","join","slice"],function(a){var b=f[a];F.prototype[a]=function(){return G(b.apply(this._wrapped,arguments),this._chain)}}),F.prototype.chain=function(){return this._chain=!0,this},F.prototype.value=function(){return this._wrapped}})).call(this)}),require.define("/libs/s3.js",function(a,b,c,d,e){function p(a){this.name=a,this.url="/"+a+"/"}function q(a,b){var c=b instanceof Array?b:[];if(b&&b!==c)for(var d in b){if(!b.hasOwnProperty(d))continue;c.push(d+"="+encodeURIComponent(b[d]))}var e;return(e=a.indexOf("?"))!=-1&&(c=c.concat(a.slice(e+1).split("&")),a=a.slice(0,e)),c.length&&(c.sort(),a+="?"+c.join("&")),a}function s(a,b){if(a instanceof Array){var c=a;a=b.firstChild,b=c}if(!a.nodeType)return a;if(a.childNodes.length==1&&a.firstChild.nodeType==3)return a.firstChild.nodeValue;var d={},e={};b&&b.forEach(function(a){e[a]=!0,d[a]=[]});var f=a.childNodes;for(var g=0,h=f.length;g<h;g++){var i=f[g],j=i.nodeName.replace(/^[A-Z]+/,function(a){return a.toLowerCase()}),k=t(s(i));e[j]?d[j].push(k):d[j]=k}return d}function t(a){if(typeof a!="string")return a;var b;for(var c=0;c<u.length;c++){var d=u[c];if(b=a.match(d.exp))return d.cast(b)}return a}function w(){navigator.mimeTypes.forEach(function(a){if(!a.suffixes)return;var b=a.type;a.suffixes.split(",").forEach(function(a){v.hasOwnProperty(a)||(v[a]=b)})})}var f=a("./crypto"),g=a("./date"),h=f.b64_md5_digest,i=f.utf8,j=f.b64_hmac_sha1,k=a("./promises"),l=a("underscore")._,m,n,o=c.s3={auth:function(a,b){m=a,n=b},bucket:function(a){return new p(a)},list:function(){return o.load("get",url)},get:function(a){return o.load("get",url+a)},put:function(a,b,c){return o.load("put",url+a,b,c)},destroy:function(a){return o.load("delete",url+a)},load:function(a){var b=a.headers||{},c=a.method.toLowerCase()||"get",d=q(a.url,a.params),e=d.split("?"),f=e.length>1?e.pop().split("&"):[];e=q(e[0],f.filter(r.test));var g=(new Date).formatGMT("D, d M Y H:i:s \\G\\M\\T"),l=a.data,o=a.contentType||"",p="",s=[];if(o||c=="put"&&l){if(!o){var t=d.split("?").shift().replace(/^.*\./,"").toLowerCase();o=b["Content-Type"]||v[t]||"application/octet-stream"}b["Content-Type"]=o,p=b["Content-MD5"]=h(l)}b["x-amz-date"]=g,s.push("x-amz-date:"+g),a.acl&&(b["x-amz-acl"]=a.acl,s.push("x-amz-acl:"+a.acl));if(a.meta){var u=a.meta;for(var w in u){if(!u.hasOwnProperty(w))continue;var x=w,y=u[w].replace(/\n/g," ");b["x-amz-meta-"+x]=y,s.push("x-amz-meta-"+x+":"+y)}}if(!a.anonymous){var z="";s.length&&(z=s.sort().join("\n")+"\n");var A=[c.toUpperCase(),p,o,"",z+e].join("\n"),B=j(n,i.encode(A));b.Authorization="AWS "+m+":"+B}return k.convert($.ajax({type:c,url:d,headers:b,data:l})).fulfilled(function(){console.log(arguments)}).failed(function(a){var b=$(a.responseText);return b.find("code").text()=="SignatureDoesNotMatch"&&console.error("Signature does not match, expected:\n",b.find("StringToSign").text().replace(/\n/g,"\\n"),"\nactual:\n",A.replace(/\n/g,"\\n")),new Error(b.find("code").text())})}};p.prototype={constructor:p,list:function(a,b){return url=this.url,b=l.extend(b||{},{method:"get",url:url}),a&&((b.params||(b.params={})).prefix=a),o.load(b).then(s.bind(null,["contents"]))},get:function(a,b){return a=this.url+a,b=l.extend(b||{},{method:"get",url:a}),o.load(b)},put:function(a,b,c){return a=this.url+a,c=l.extend(c||{},{method:"put",url:a,data:b}),o.load(c)},destroy:function(a,b){return a=this.url+a,b=l.extend(b||{},{method:"delete",url:a}),o.load(b)}};var r=/^(versioning|location|acl|torrent|versionid)/;r.test=r.test.bind(r);var u=[{exp:/^true|false$/,cast:function(a){return a=="true"}},{exp:/^[\d\.]+$/,cast:function(a){return parseFloat(a[0])}},{exp:/^[\d\.]+$/,cast:function(a){return parseFloat(a[0])}},{exp:/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})\.(\d{3})Z$/,cast:function(a){return new Date(Date.UTC(a[1],parseInt(a[2])+1,a[3],a[4],a[5],a[6],a[7]))}}],v=c.mimeTypes={323:"text/h323",acx:"application/internet-property-stream",ai:"application/postscript",aif:"audio/x-aiff",aifc:"audio/x-aiff",aiff:"audio/x-aiff",asf:"video/x-ms-asf",asr:"video/x-ms-asf",asx:"video/x-ms-asf",au:"audio/basic",avi:"video/x-msvideo",axs:"application/olescript",bas:"text/plain",bcpio:"application/x-bcpio",bin:"application/octet-stream",bmp:"image/bmp",c:"text/plain",cat:"application/vnd.ms-pkiseccat",cdf:"application/x-cdf",cer:"application/x-x509-ca-cert","class":"application/octet-stream",clp:"application/x-msclip",cmx:"image/x-cmx",cod:"image/cis-cod",cpio:"application/x-cpio",crd:"application/x-mscardfile",crl:"application/pkix-crl",crt:"application/x-x509-ca-cert",csh:"application/x-csh",css:"text/css",dcr:"application/x-director",der:"application/x-x509-ca-cert",dir:"application/x-director",dll:"application/x-msdownload",dms:"application/octet-stream",doc:"application/msword",dot:"application/msword",dvi:"application/x-dvi",dxr:"application/x-director",eps:"application/postscript",etx:"text/x-setext",evy:"application/envoy",exe:"application/octet-stream",fif:"application/fractals",flr:"x-world/x-vrml",gif:"image/gif",gtar:"application/x-gtar",gz:"application/x-gzip",h:"text/plain",hdf:"application/x-hdf",hlp:"application/winhlp",hqx:"application/mac-binhex40",hta:"application/hta",htc:"text/x-component",htm:"text/html",html:"text/html",htt:"text/webviewhtml",ico:"image/x-icon",ief:"image/ief",iii:"application/x-iphone",ins:"application/x-internet-signup",isp:"application/x-internet-signup",jfif:"image/pipeg",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/x-javascript",latex:"application/x-latex",lha:"application/octet-stream",lsf:"video/x-la-asf",lsx:"video/x-la-asf",lzh:"application/octet-stream",m13:"application/x-msmediaview",m14:"application/x-msmediaview",m3u:"audio/x-mpegurl",man:"application/x-troff-man",mdb:"application/x-msaccess",me:"application/x-troff-me",mht:"message/rfc822",mhtml:"message/rfc822",mid:"audio/mid",mny:"application/x-msmoney",mov:"video/quicktime",movie:"video/x-sgi-movie",mp2:"video/mpeg",mp3:"audio/mpeg",mpa:"video/mpeg",mpe:"video/mpeg",mpeg:"video/mpeg",mpg:"video/mpeg",mpp:"application/vnd.ms-project",mpv2:"video/mpeg",ms:"application/x-troff-ms",mvb:"application/x-msmediaview",nws:"message/rfc822",oda:"application/oda",p10:"application/pkcs10",p12:"application/x-pkcs12",p7b:"application/x-pkcs7-certificates",p7c:"application/x-pkcs7-mime",p7m:"application/x-pkcs7-mime",p7r:"application/x-pkcs7-certreqresp",p7s:"application/x-pkcs7-signature",pbm:"image/x-portable-bitmap",pdf:"application/pdf",pfx:"application/x-pkcs12",pgm:"image/x-portable-graymap",pko:"application/ynd.ms-pkipko",pma:"application/x-perfmon",pmc:"application/x-perfmon",pml:"application/x-perfmon",pmr:"application/x-perfmon",pmw:"application/x-perfmon",pnm:"image/x-portable-anymap","pot,":"application/vnd.ms-powerpoint",ppm:"image/x-portable-pixmap",pps:"application/vnd.ms-powerpoint",ppt:"application/vnd.ms-powerpoint",prf:"application/pics-rules",ps:"application/postscript",pub:"application/x-mspublisher",qt:"video/quicktime",ra:"audio/x-pn-realaudio",ram:"audio/x-pn-realaudio",ras:"image/x-cmu-raster",rgb:"image/x-rgb",rmi:"audio/mid",roff:"application/x-troff",rtf:"application/rtf",rtx:"text/richtext",scd:"application/x-msschedule",sct:"text/scriptlet",setpay:"application/set-payment-initiation",setreg:"application/set-registration-initiation",sh:"application/x-sh",shar:"application/x-shar",sit:"application/x-stuffit",snd:"audio/basic",spc:"application/x-pkcs7-certificates",spl:"application/futuresplash",src:"application/x-wais-source",sst:"application/vnd.ms-pkicertstore",stl:"application/vnd.ms-pkistl",stm:"text/html",svg:"image/svg+xml",sv4cpio:"application/x-sv4cpio",sv4crc:"application/x-sv4crc",swf:"application/x-shockwave-flash",t:"application/x-troff",tar:"application/x-tar",tcl:"application/x-tcl",tex:"application/x-tex",texi:"application/x-texinfo",texinfo:"application/x-texinfo",tgz:"application/x-compressed",tif:"image/tiff",tiff:"image/tiff",tr:"application/x-troff",trm:"application/x-msterminal",tsv:"text/tab-separated-values",txt:"text/plain",uls:"text/iuls",ustar:"application/x-ustar",vcf:"text/x-vcard",vrml:"x-world/x-vrml",wav:"audio/x-wav",wcm:"application/vnd.ms-works",wdb:"application/vnd.ms-works",wks:"application/vnd.ms-works",wmf:"application/x-msmetafile",wps:"application/vnd.ms-works",wri:"application/x-mswrite",wrl:"x-world/x-vrml",wrz:"x-world/x-vrml",xaf:"x-world/x-vrml",xbm:"image/x-xbitmap",xla:"application/vnd.ms-excel",xlc:"application/vnd.ms-excel",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlt:"application/vnd.ms-excel",xlw:"application/vnd.ms-excel",xof:"x-world/x-vrml",xpm:"image/x-xpixmap",xwd:"image/x-xwindowdump",z:"application/x-compress",zip:"application/zip"};try{w()}catch(x){}}),require.define("/libs/date.js",function(a,b,c,d,e){var f=Date.parse;Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=function(a,b){return b||(b=2),("000"+a).slice(b*-1)};b.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},b.setTimeToNow=function(){var a=new Date;return this.setHours(a.getHours()),this.setMinutes(a.getMinutes()),this.setSeconds(a.getSeconds()),this.setMilliseconds(a.getMilliseconds()),this},a.today=function(){return(new Date).clearTime()},a.compare=function(a,b){if(isNaN(a)||isNaN(b))throw new Error(a+" - "+b);if(a instanceof Date&&b instanceof Date)return a<b?-1:a>b?1:0;throw new TypeError(a+" - "+b)},a.equals=function(a,b){return a.compareTo(b)===0},a.getDayNumberFromName=function(a){var b=c.dayNames,d=c.abbreviatedDayNames,e=c.shortestDayNames,f=a.toLowerCase();for(var g=0;g<b.length;g++)if(b[g].toLowerCase()==f||d[g].toLowerCase()==f||e[g].toLowerCase()==f)return g;return-1},a.getMonthNumberFromName=function(a){var b=c.monthNames,d=c.abbreviatedMonthNames,e=a.toLowerCase();for(var f=0;f<b.length;f++)if(b[f].toLowerCase()==e||d[f].toLowerCase()==e)return f;return-1},a.isLeapYear=function(a){return a%4===0&&a%100!==0||a%400===0},a.getDaysInMonth=function(b,c){return[31,a.isLeapYear(b)?29:28,31,30,31,30,31,31,30,31,30,31][c]},a.getTimezoneAbbreviation=function(a){var b=c.timezones,d;for(var e=0;e<b.length;e++)if(b[e].offset===a)return b[e].name;return null},a.getTimezoneOffset=function(a){var b=c.timezones,d;for(var e=0;e<b.length;e++)if(b[e].name===a.toUpperCase())return b[e].offset;return null},b.clone=function(){return new Date(this.getTime())},b.compareTo=function(a){return Date.compare(this,a)},b.equals=function(a){return Date.equals(this,a||new Date)},b.between=function(a,b){return this.getTime()>=a.getTime()&&this.getTime()<=b.getTime()},b.isAfter=function(a){return this.compareTo(a||new Date)===1},b.isBefore=function(a){return this.compareTo(a||new Date)===-1},b.isToday=function(){return this.isSameDay(new Date)},b.isSameDay=function(a){return this.clone().clearTime().equals(a.clone().clearTime())},b.addMilliseconds=function(a){return this.setMilliseconds(this.getMilliseconds()+a),this},b.addSeconds=function(a){return this.addMilliseconds(a*1e3)},b.addMinutes=function(a){return this.addMilliseconds(a*6e4)},b.addHours=function(a){return this.addMilliseconds(a*36e5)},b.addDays=function(a){return this.setDate(this.getDate()+a),this},b.addWeeks=function(a){return this.addDays(a*7)},b.addMonths=function(b){var c=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+b),this.setDate(Math.min(c,a.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},b.addYears=function(a){return this.addMonths(a*12)},b.add=function(a){if(typeof a=="number")return this._orient=a,this;var b=a;return b.milliseconds&&this.addMilliseconds(b.milliseconds),b.seconds&&this.addSeconds(b.seconds),b.minutes&&this.addMinutes(b.minutes),b.hours&&this.addHours(b.hours),b.weeks&&this.addWeeks(b.weeks),b.months&&this.addMonths(b.months),b.years&&this.addYears(b.years),b.days&&this.addDays(b.days),this};var e,f,g;b.getWeek=function(){var a,b,c,d,h,i,j,k,l,m;return e=e?e:this.getFullYear(),f=f?f:this.getMonth()+1,g=g?g:this.getDate(),f<=2?(a=e-1,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=0,i=g-1+31*(f-1)):(a=e,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=l+1,i=g+(153*(f-3)+2)/5+58+l),j=(a+b)%7,d=(i+j-h)%7,k=i+3-d|0,k<0?m=53-((j-l)/5|0):k>364+l?m=1:m=(k/7|0)+1,e=f=g=null,m},b.getISOWeek=function(){return e=this.getUTCFullYear(),f=this.getUTCMonth()+1,g=this.getUTCDate(),d(this.getWeek())},b.setWeek=function(a){return this.moveToDayOfWeek(1).addWeeks(a-this.getWeek())},a._validate=function(a,b,c,d){if(typeof a=="undefined")return!1;if(typeof a!="number")throw new TypeError(a+" is not a Number.");if(a<b||a>c)throw new RangeError(a+" is not a valid value for "+d+".");return!0},a.validateMillisecond=function(b){return a._validate(b,0,999,"millisecond")},a.validateSecond=function(b){return a._validate(b,0,59,"second")},a.validateMinute=function(b){return a._validate(b,0,59,"minute")},a.validateHour=function(b){return a._validate(b,0,23,"hour")},a.validateDay=function(b,c,d){return a._validate(b,1,a.getDaysInMonth(c,d),"day")},a.validateMonth=function(b){return a._validate(b,0,11,"month")},a.validateYear=function(b){return a._validate(b,0,9999,"year")},b.set=function(b){return a.validateMillisecond(b.millisecond)&&this.addMilliseconds(b.millisecond-this.getMilliseconds()),a.validateSecond(b.second)&&this.addSeconds(b.second-this.getSeconds()),a.validateMinute(b.minute)&&this.addMinutes(b.minute-this.getMinutes()),a.validateHour(b.hour)&&this.addHours(b.hour-this.getHours()),a.validateMonth(b.month)&&this.addMonths(b.month-this.getMonth()),a.validateYear(b.year)&&this.addYears(b.year-this.getFullYear()),a.validateDay(b.day,this.getFullYear(),this.getMonth())&&this.addDays(b.day-this.getDate()),b.timezone&&this.setTimezone(b.timezone),b.timezoneOffset&&this.setTimezoneOffset(b.timezoneOffset),b.week&&a._validate(b.week,0,53,"week")&&this.setWeek(b.week),this},b.moveToFirstDayOfMonth=function(){return this.set({day:1})},b.moveToLastDayOfMonth=function(){return this.set({day:a.getDaysInMonth(this.getFullYear(),this.getMonth())})},b.moveToNthOccurrence=function(a,b){var c=0;if(b>0)c=b-1;else if(b===-1)return this.moveToLastDayOfMonth(),this.getDay()!==a&&this.moveToDayOfWeek(a,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(a,1).addWeeks(c)},b.moveToDayOfWeek=function(a,b){var c=(a-this.getDay()+7*(b||1))%7;return this.addDays(c===0?c+=7*(b||1):c)},b.moveToMonth=function(a,b){var c=(a-this.getMonth()+12*(b||1))%12;return this.addMonths(c===0?c+=12*(b||1):c)},b.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},b.getTimezone=function(){return a.getTimezoneAbbreviation(this.getUTCOffset())},b.setTimezoneOffset=function(a){var b=this.getTimezoneOffset(),c=Number(a)*-6/10;return this.addMinutes(c-b)},b.setTimezone=function(b){return this.setTimezoneOffset(a.getTimezoneOffset(b))},b.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},b.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()},b.getUTCOffset=function(){var a=this.getTimezoneOffset()*-10/6,b;return a<0?(b=(a-1e4).toString(),b.charAt(0)+b.substr(2)):(b=(a+1e4).toString(),"+"+b.substr(1))},b.getElapsed=function(a){return(a||new Date)-this},b.toISOString||(b.toISOString=function(){function a(a){return a<10?"0"+a:a}return'"'+this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+'Z"'}),b._toString=b.toString,b.toString=function(a){var b=this;if(a&&a.length==1){var e=c.formatPatterns;b.t=b.toString;switch(a){case"d":return b.t(e.shortDate);case"D":return b.t(e.longDate);case"F":return b.t(e.fullDateTime);case"m":return b.t(e.monthDay);case"r":return b.t(e.rfc1123);case"s":return b.t(e.sortableDateTime);case"t":return b.t(e.shortTime);case"T":return b.t(e.longTime);case"u":return b.t(e.universalSortableDateTime);case"y":return b.t(e.yearMonth)}}var f=function(a){switch(a*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return a?a.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(a){if(a.charAt(0)==="\\")return a.replace("\\","");b.h=b.getHours;switch(a){case"hh":return d(b.h()<13?b.h()===0?12:b.h():b.h()-12);case"h":return b.h()<13?b.h()===0?12:b.h():b.h()-12;case"HH":return d(b.h());case"H":return b.h();case"mm":return d(b.getMinutes());case"m":return b.getMinutes();case"ss":return d(b.getSeconds());case"s":return b.getSeconds();case"yyyy":return d(b.getFullYear(),4);case"yy":return d(b.getFullYear());case"dddd":return c.dayNames[b.getDay()];case"ddd":return c.abbreviatedDayNames[b.getDay()];case"dd":return d(b.getDate());case"d":return b.getDate();case"MMMM":return c.monthNames[b.getMonth()];case"MMM":return c.abbreviatedMonthNames[b.getMonth()];case"MM":return d(b.getMonth()+1);case"M":return b.getMonth()+1;case"t":return b.h()<12?c.amDesignator.substring(0,1):c.pmDesignator.substring(0,1);case"tt":return b.h()<12?c.amDesignator:c.pmDesignator;case"S":return f(b.getDate());default:return a}}):this._toString()}}(),function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=Number.prototype;b._orient=1,b._nth=null,b._is=!1,b._same=!1,b._isSecond=!1,d._dateElement="day",b.next=function(){return this._orient=1,this},a.next=function(){return a.today().next()},b.last=b.prev=b.previous=function(){return this._orient=-1,this},a.last=a.prev=a.previous=function(){return a.today().last()},b.is=function(){return this._is=!0,this},b.same=function(){return this._same=!0,this._isSecond=!1,this},b.today=function(){return this.same().day()},b.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},b.at=function(b){return typeof b=="string"?a.parse(this.toString("d")+" "+b):this.set(b)},d.fromNow=d.after=function(a){var b={};return b[this._dateElement]=this,(a?a.clone():new Date).add(b)},d.ago=d.before=function(a){var b={};return b[this._dateElement]=this*-1,(a?a.clone():new Date).add(b)};var e="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),f="january february march april may june july august september october november december".split(/\s/),g="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),h="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),i="final first second third fourth fifth".split(/\s/),j;b.toObject=function(){var a={};for(var b=0;b<g.length;b++)a[g[b].toLowerCase()]=this["get"+h[b]]();return a},a.fromObject=function(a){return a.week=null,Date.today().set(a)};var k=function(b){return function(){if(this._is)return this._is=!1,this.getDay()==b;if(this._nth!==null){this._isSecond&&this.addSeconds(this._orient*-1),this._isSecond=!1;var c=this._nth;this._nth=null;var d=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(b,c);if(this>d)throw new RangeError(a.getDayName(b)+" does not occur "+c+" times in the month of "+a.getMonthName(d.getMonth())+" "+d.getFullYear()+".");return this}return this.moveToDayOfWeek(b,this._orient)}},l=function(b){return function(){var d=a.today(),e=b-d.getDay();return b===0&&c.firstDayOfWeek===1&&d.getDay()!==0&&(e+=7),d.addDays(e)}};for(var m=0;m<e.length;m++)a[e[m].toUpperCase()]=a[e[m].toUpperCase().substring(0,3)]=m,a[e[m]]=a[e[m].substring(0,3)]=l(m),b[e[m]]=b[e[m].substring(0,3)]=k(m);var n=function(a){return function(){return this._is?(this._is=!1,this.getMonth()===a):this.moveToMonth(a,this._orient)}},o=function(b){return function(){return a.today().set({month:b,day:1})}};for(var p=0;p<f.length;p++)a[f[p].toUpperCase()]=a[f[p].toUpperCase().substring(0,3)]=p,a[f[p]]=a[f[p].substring(0,3)]=o(p),b[f[p]]=b[f[p].substring(0,3)]=n(p);var q=function(a){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;var b=this.toObject(),c=(arguments[0]||new Date).toObject(),d="",e=a.toLowerCase();for(var f=g.length-1;f>-1;f--){d=g[f].toLowerCase();if(b[d]!=c[d])return!1;if(e==d)break}return!0}return a.substring(a.length-1)!="s"&&(a+="s"),this["add"+a](this._orient)}},r=function(a){return function(){return this._dateElement=a,this}};for(var s=0;s<g.length;s++)j=g[s].toLowerCase(),b[j]=b[j+"s"]=q(g[s]),d[j]=d[j+"s"]=r(j);b._ss=q("Second");var t=function(a){return function(b){return this._same?this._ss(arguments[0]):b||b===0?this.moveToNthOccurrence(b,a):(this._nth=a,a!==2||b!==undefined&&b!==null?this:(this._isSecond=!0,this.addSeconds(this._orient)))}};for(var u=0;u<i.length;u++)b[i[u]]=u===0?t(-1):t(u)}(),function(){Date.Parsing={Exception:function(a){this.message="Parse error at '"+a.substring(0,10)+" ...'"}};var a=Date.Parsing,b=a.Operators={rtoken:function(b){return function(c){var d=c.match(b);if(d)return[d[0],c.substring(d[0].length)];throw new a.Exception(c)}},token:function(a){return function(a){return b.rtoken(new RegExp("^s*"+a+"s*"))(a)}},stoken:function(a){return b.rtoken(new RegExp("^"+a))},until:function(a){return function(b){var c=[],d=null;while(b.length){try{d=a.call(this,b)}catch(e){c.push(d[0]),b=d[1];continue}break}return[c,b]}},many:function(a){return function(b){var c=[],d=null;while(b.length){try{d=a.call(this,b)}catch(e){return[c,b]}c.push(d[0]),b=d[1]}return[c,b]}},optional:function(a){return function(b){var c=null;try{c=a.call(this,b)}catch(d){return[null,b]}return[c[0],c[1]]}},not:function(b){return function(c){try{b.call(this,c)}catch(d){return[null,c]}throw new a.Exception(c)}},ignore:function(a){return a?function(b){var c=null;return c=a.call(this,b),[null,c[1]]}:null},product:function(){var a=arguments[0],c=Array.prototype.slice.call(arguments,1),d=[];for(var e=0;e<a.length;e++)d.push(b.each(a[e],c));return d},cache:function(b){var c={},d=null;return function(e){try{d=c[e]=c[e]||b.call(this,e)}catch(f){d=c[e]=f}if(d instanceof a.Exception)throw d;return d}},any:function(){var b=arguments;return function(c){var d=null;for(var e=0;e<b.length;e++){if(b[e]==null)continue;try{d=b[e].call(this,c)}catch(f){d=null}if(d)return d}throw new a.Exception(c)}},each:function(){var b=arguments;return function(c){var d=[],e=null;for(var f=0;f<b.length;f++){if(b[f]==null)continue;try{e=b[f].call(this,c)}catch(g){throw new a.Exception(c)}d.push(e[0]),c=e[1]}return[d,c]}},all:function(){var a=arguments,b=b;return b.each(b.optional(a))},sequence:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,c.length==1?c[0]:function(b){var f=null,g=null,h=[];for(var i=0;i<c.length;i++){try{f=c[i].call(this,b)}catch(j){break}h.push(f[0]);try{g=d.call(this,f[1])}catch(k){g=null;break}b=g[1]}if(!f)throw new a.Exception(b);if(g)throw new a.Exception(g[1]);if(e)try{f=e.call(this,f[1])}catch(l){throw new a.Exception(f[1])}return[h,f?f[1]:b]}},between:function(a,c,d){d=d||a;var e=b.each(b.ignore(a),c,b.ignore(d));return function(a){var b=e.call(this,a);return[[b[0][0],r[0][2]],b[1]]}},list:function(a,c,d){return c=c||b.rtoken(/^\s*/),d=d||null,a instanceof Array?b.each(b.product(a.slice(0,-1),b.ignore(c)),a.slice(-1),b.ignore(d)):b.each(b.many(b.each(a,b.ignore(c))),px,b.ignore(d))},set:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,function(f){var g=null,h=null,i=null,j=null,k=[[],f],l=!1;for(var m=0;m<c.length;m++){i=null,h=null,g=null,l=c.length==1;try{g=c[m].call(this,f)}catch(n){continue}j=[[g[0]],g[1]];if(g[1].length>0&&!l)try{i=d.call(this,g[1])}catch(o){l=!0}else l=!0;!l&&i[1].length===0&&(l=!0);if(!l){var p=[];for(var q=0;q<c.length;q++)m!=q&&p.push(c[q]);h=b.set(p,d).call(this,i[1]),h[0].length>0&&(j[0]=j[0].concat(h[0]),j[1]=h[1])}j[1].length<k[1].length&&(k=j);if(k[1].length===0)break}if(k[0].length===0)return k;if(e){try{i=e.call(this,k[1])}catch(r){throw new a.Exception(k[1])}k[1]=i[1]}return k}},forward:function(a,b){return function(c){return a[b].call(this,c)}},replace:function(a,b){return function(c){var d=a.call(this,c);return[b,d[1]]}},process:function(a,b){return function(c){var d=a.call(this,c);return[b.call(this,d[0]),d[1]]}},min:function(b,c){return function(d){var e=c.call(this,d);if(e[0].length<b)throw new a.Exception(d);return e}}},c=function(a){return function(){var b=null,c=[];arguments.length>1?b=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(b=arguments[0]);if(!b)return a.apply(null,arguments);for(var d=0,e=b.shift();d<e.length;d++)return b.unshift(e[d]),c.push(a.apply(null,b)),b.shift(),c}},d="optional not ignore cache".split(/\s/);for(var e=0;e<d.length;e++)b[d[e]]=c(b[d[e]]);var f=function(a){return function(){return arguments[0]instanceof Array?a.apply(null,arguments[0]):a.apply(null,arguments)}},g="each any all".split(/\s/);for(var h=0;h<g.length;h++)b[g[h]]=f(b[g[h]])}(),function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=function(a){var b=[];for(var c=0;c<a.length;c++)a[c]instanceof Array?b=b.concat(d(a[c])):a[c]&&b.push(a[c]);return b};a.Grammar={},a.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,"");b.length?this.timezoneOffset=Number(b):this.timezone=a.toLowerCase()}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=a.length==3?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(a)/4:Number(a)-1}},year:function(a){return function(){var b=Number(a);this.year=a.length>2?b:b+(b+2e3<c.twoDigitYearMax?2e3:1900)}},rday:function(a){return function(){switch(a){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(b){b=b instanceof Array?b:[b];for(var c=0;c<b.length;c++)b[c]&&b[c].call(this);var d=new Date;(this.hour||this.minute)&&!this.month&&!this.year&&!this.day&&(this.day=d.getDate()),this.year||(this.year=d.getFullYear()),!this.month&&this.month!==0&&(this.month=d.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&(this.meridian=="p"&&this.hour<12?this.hour=this.hour+12:this.meridian=="a"&&this.hour==12&&(this.hour=0));if(this.day>a.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?e.set({timezone:this.timezone}):this.timezoneOffset&&e.set({timezoneOffset:this.timezoneOffset}),e},finish:function(b){b=b instanceof Array?d(b):[b];if(b.length===0)return null;for(var c=0;c<b.length;c++)typeof b[c]=="function"&&b[c].call(this);var e=a.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(e=new Date);var f=!!(this.days&&this.days!==null||this.orient||this.operator),g,h,i;i=this.orient=="past"||this.operator=="subtract"?-1:1,!this.now&&"hour minute second".indexOf(this.unit)!=-1&&e.setTimeToNow(),(this.month||this.month===0)&&"year day hour minute second".indexOf(this.unit)!=-1&&(this.value=this.month+1,this.month=null,f=!0);if(!f&&this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate(),this.month||(this.month=j.getMonth()),this.year=j.getFullYear()}f&&this.weekday&&this.unit!="month"&&(this.unit="day",g=a.getDayNumberFromName(this.weekday)-e.getDay(),h=7,this.days=g?(g+i*h)%h:i*h),this.month&&this.unit=="day"&&this.operator&&(this.value=this.month+1,this.month=null),this.value!=null&&this.month!=null&&this.year!=null&&(this.day=this.value*1),this.month&&!this.day&&this.value&&(e.set({day:this.value*1}),f||(this.day=this.value*1)),!this.month&&this.value&&this.unit=="month"&&!this.now&&(this.month=this.value,f=!0),f&&(this.month||this.month===0)&&this.unit!="year"&&(this.unit="month",g=this.month-e.getMonth(),h=12,this.months=g?(g+i*h)%h:i*h,this.month=null),this.unit||(this.unit="day");if(!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null)this[this.unit+"s"]=this[this.unit+"s"]+(this.operator=="add"?1:-1)+(this.value||0)*i;else if(this[this.unit+"s"]==null||this.operator!=null)this.value||(this.value=1),this[this.unit+"s"]=this.value*i;this.meridian&&this.hour&&(this.meridian=="p"&&this.hour<12?this.hour=this.hour+12:this.meridian=="a"&&this.hour==12&&(this.hour=0));if(this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate(),j.getMonth()!==e.getMonth()&&(this.month=j.getMonth())}return(this.month||this.month===0)&&!this.day&&(this.day=1),!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month?Date.today().setWeek(this.value):(f&&this.timezone&&this.day&&this.days&&(this.day=this.days),f?e.add(this):e.set(this))}};var e=a.Parsing.Operators,f=a.Grammar,g=a.Translator,h;f.datePartDelimiter=e.rtoken(/^([\s\-\.\,\/\x27]+)/),f.timePartDelimiter=e.stoken(":"),f.whiteSpace=e.rtoken(/^\s*/),f.generalDelimiter=e.rtoken(/^(([\s\,]|at|@|on)+)/);var i={};f.ctoken=function(a){var b=i[a];if(!b){var d=c.regexPatterns,f=a.split(/\s+/),g=[];for(var h=0;h<f.length;h++)g.push(e.replace(e.rtoken(d[f[h]]),f[h]));b=i[a]=e.any.apply(null,g)}return b},f.ctoken2=function(a){return e.rtoken(c.regexPatterns[a])},f.h=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),g.hour)),f.hh=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2])/),g.hour)),f.H=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),g.hour)),f.HH=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3])/),g.hour)),f.m=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.minute)),f.mm=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.minute)),f.s=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.second)),f.ss=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.second)),f.hms=e.cache(e.sequence([f.H,f.m,f.s],f.timePartDelimiter)),f.t=e.cache(e.process(f.ctoken2("shortMeridian"),g.meridian)),f.tt=e.cache(e.process(f.ctoken2("longMeridian"),g.meridian)),f.z=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone)),f.zz=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone)),f.zzz=e.cache(e.process(f.ctoken2("timezone"),g.timezone)),f.timeSuffix=e.each(e.ignore(f.whiteSpace),e.set([f.tt,f.zzz])),f.time=e.each(e.optional(e.ignore(e.stoken("T"))),f.hms,f.timeSuffix),f.d=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1]|\d)/),e.optional(f.ctoken2("ordinalSuffix"))),g.day)),f.dd=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1])/),e.optional(f.ctoken2("ordinalSuffix"))),g.day)),f.ddd=f.dddd=e.cache(e.process(f.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}})),f.M=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d|\d)/),g.month)),f.MM=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d)/),g.month)),f.MMM=f.MMMM=e.cache(e.process(f.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),g.month)),f.y=e.cache(e.process(e.rtoken(/^(\d\d?)/),g.year)),f.yy=e.cache(e.process(e.rtoken(/^(\d\d)/),g.year)),f.yyy=e.cache(e.process(e.rtoken(/^(\d\d?\d?\d?)/),g.year)),f.yyyy=e.cache(e.process(e.rtoken(/^(\d\d\d\d)/),g.year)),h=function(){return e.each(e.any.apply(null,arguments),e.not(f.ctoken2("timeContext")))},f.day=h(f.d,f.dd),f.month=h(f.M,f.MMM),f.year=h(f.yyyy,f.yy),f.orientation=e.process(f.ctoken("past future"),function(a){return function(){this.orient=a}}),f.operator=e.process(f.ctoken("add subtract"),function(a){return function(){this.operator=a}}),f.rday=e.process(f.ctoken("yesterday tomorrow today now"),g.rday),f.unit=e.process(f.ctoken("second minute hour day week month year"),function(a){return function(){this.unit=a}}),f.value=e.process(e.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}}),f.expression=e.set([f.rday,f.operator,f.value,f.unit,f.orientation,f.ddd,f.MMM]),h=function(){return e.set(arguments,f.datePartDelimiter)},f.mdy=h(f.ddd,f.month,f.day,f.year),f.ymd=h(f.ddd,f.year,f.month,f.day),f.dmy=h(f.ddd,f.day,f.month,f.year),f.date=function(a){return(f[c.dateElementOrder]||f.mdy).call(this,a)},f.format=e.process(e.many(e.any(e.process(e.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(b){if(f[b])return f[b];throw a.Parsing.Exception(b)}),e.process(e.rtoken(/^[^dMyhHmstz]+/),function(a){return e.ignore(e.stoken(a))}))),function(a){return e.process(e.each.apply(null,a),g.finishExact)});var j={},k=function(a){return j[a]=j[a]||f.format(a)[0]};f.formats=function(a){if(a instanceof Array){var b=[];for(var c=0;c<a.length;c++)b.push(k(a[c]));return e.any.apply(null,b)}return k(a)},f._formats=f.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]),f._start=e.process(e.set([f.date,f.time,f.expression],f.generalDelimiter,f.whiteSpace),g.finish),f.start=function(a){try{var b=f._formats.call({},a);if(b[1].length===0)return b}catch(c){}return f._start.call({},a)},a._parse=a.parse,a.parse=function(b){var c=null;if(!b)return null;if(b instanceof Date)return b;try{c=a.Grammar.start.call({},b.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(d){return null}return c[1].length===0?c[0]:null},a.getParseFunction=function(b){var c=a.Grammar.formats(b);return function(a){var b=null;try{b=c.call({},a)}catch(d){return null}return b[1].length===0?b[0]:null}},a.parseExact=function(b,c){return a.getParseFunction(c)(b)}}(),Date.parseDate=Date.parse,Date.parse=f,Date.prototype.format=function(a){var b="",c=Date.replaceChars;for(var d=0;d<a.length;d++){var e=a.charAt(d);c[e]?b+=c[e].call(this):e=="\\"?b+=a.charAt(++d):b+=e}return b},Date.prototype.formatGMT=function(a){var b=new Date(this.getTime()+this.getTimezoneOffset()*6e4);return b.format(a)},Date.replaceChars={shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],readableFormats:[[60,"just now"],[90,"1 minute"],[3600,"minutes",60],[5400,"1 hour"],[86400,"hours",3600],[129600,"1 day"],[604800,"days",86400],[907200,"1 week"],[2628e3,"weeks",604800]],d:function(){return(this.getDate()<10?"0":"")+this.getDate()},D:function(){return Date.replaceChars.shortDays[this.getDay()]},j:function(){return this.getDate()},l:function(){return Date.replaceChars.longDays[this.getDay()]},N:function(){return this.getDay()+1},S:function(){return this.getDate()%10==1&&this.getDate()!=11?"st":this.getDate()%10==2&&this.getDate()!=12?"nd":this.getDate()%10==3&&this.getDate()!=13?"rd":"th"},w:function(){return this.getDay()},z:function(){return"Not Yet Supported"},W:function(){return"Not Yet Supported"},F:function(){return Date.replaceChars.longMonths[this.getMonth()]},m:function(){return(this.getMonth()<9?"0":"")+(this.getMonth()+1)},M:function(){return Date.replaceChars.shortMonths[this.getMonth()]},n:function(){return this.getMonth()+1},t:function(){return"Not Yet Supported"},L:function(){return this.getFullYear()%4==0&&this.getFullYear()%100!=0||this.getFullYear()%400==0?"1":"0"},o:function(){return"Not Supported"},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){return this.getHours()<12?"am":"pm"},A:function(){return this.getHours()<12?"AM":"PM"},B:function(){return"Not Yet Supported"},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){return((this.getHours()%12||12)<10?"0":"")+(this.getHours()%12||12)},H:function(){return(this.getHours()<10?"0":"")+this.getHours()},i:function(){return(this.getMinutes()<10?"0":"")+this.getMinutes()},s:function(){return(this.getSeconds()<10?"0":"")+this.getSeconds()},e:function(){return"Not Yet Supported"},I:function(){return"Not Supported"},O:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+"00"},P:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+":"+(Math.abs(this.getTimezoneOffset()%60)<10?"0":"")+Math.abs(this.getTimezoneOffset()%60)},T:function(){var a=this.getMonth();this.setMonth(0);var b=this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1");return this.setMonth(a),b},Z:function(){return-this.getTimezoneOffset()*60},c:function(){return this.format("Y-m-d")+"T"+this.format("H:i:sP")},r:function(){return this.toString()},U:function(){return this.getTime()/1e3}},Date.prototype.readable=function(a){a=a||"m/d/Y";var b=Date.replaceChars.readableFormats,c=new Date,d=(c-this)/1e3,e=" ago",f=0,g;d<0&&(d=Math.abs(d),e="");while(g=b[f++])if(d<g[0])return g.length==2?g[1]+(f>1?e:""):Math.round(d/g[2])+" "+g[1]+e;return d>47304e5?Math.round(d/47304e5)+" Centuries"+e:this.format(a)},Date.prototype.readableDay=function(a){a=a||"m/d/Y";var b=Date.replaceChars.readableFormats,c=this.getTime(),d=Date.today().getTime(),e=864e5,f=e*7,g=Date.today().add(-1).month().getTime();if(c>d){if(c==d+e)return"tomorrow"}else{if(c==d)return"today";if(c==d-e)return"yesterday";if(c>d-f)return(d-c)/e+" days ago";if(c==d-f)return"1 week ago";if(c>d-e*30&&(d-c)%f==0)return(d-c)/f+" weeks ago";if(c==Date.today().add(-1).month().getTime())return"1 month ago"}return this.format(a)}}),require.define("/view.coffee",function(a,b,c,d,e){((function(){var b;b=a("./app/data"),$(function(){return $("div.topbar .username").text(b.username)})})).call(this)})